<!DOCTYPE html>
<html>
  <head>
    <link>
    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" href="index.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

    <title>Twittler</title>

    <script src="jquery.js"></script>
    <script src="bootstrap.min.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <div class="col-xs-7 leftBlock">
      <div class="welcome">
        <h1 align="center">Welcome to Twittler</h1>
        <h3 align="center">What's on Your Mind?</h3>
      </div>
      <div class="container formContainer" style="width:initial">
        <form>
          <textarea type="text" name="createPost" placeholder="Start typing here!"></textarea>
          <input type="submit" class='pull-right'>
        </form>
      </div>
    </div>

    <div class="col-xs-5 rightBlock">
      <div class="col-xs-4 logo"></div>
      <div class="col-xs-offset-1 col-xs-7 topBar"></div>
      <div class="postHeader">
        <h1 align="center">Newest Twittles</h1>
      </div>
      <div class="trendingBox">
        <h5 align="center">Trending:</h5>
      </div>
      <div class="postsArea">
        <ul class="postsList">
          <!-- Posts from data_generator.js inserted here -->
        </ul>
      </div>
    </div>

    <script>

      $(document).ready(function(){

        var index = streams.home.length - 1;
        var totalCurrPostHeight = 0;
        var postsListHeight = $('.postsList').height();
        
        while(totalCurrPostHeight < postsListHeight+50) {
          var postsListHeight = $('.postsList').height();
          var postTextInfo, postHeight, postTextHeight, postMargin;
          var tweet = streams.home[index];

          $('.postsList').prepend(`
            <li>
              <div class="col-xs-1 profilePic"></div>
              <div class="col-xs-9 postText">
              <b>@${tweet.user}</b>
              <br>
              <i>${tweet.created_at}</i>
              <br>
              <p>${tweet.message} || ${tweet.id}</p>
            </div>
            </li>
          `)
          ;
          postTextInfo = $('.postsList').children('li');
          postHeight = $(postTextInfo[postTextInfo.length-1]).find('.postText').height();
          postTextHeight = $(postTextInfo[postTextInfo.length-1]).find('.postText p').height();
          postMargin = (postHeight/postTextHeight)*5;

          $(postTextInfo[postTextInfo.length-1]).find('p').css('margin-bottom', postMargin+'px');
          totalCurrPostHeight += postHeight+postMargin;

          index--;
        }

        
      });

    </script>
  </body>
</html>
